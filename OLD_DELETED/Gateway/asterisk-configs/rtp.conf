[general]
; === Audio Format Configuration ===
; Enforce PCM16 16kHz mono throughout the RTP stack
allow=slin16

; RTP Configuration for Mobile Clients
; Updated to support NAT traversal

; RTP port range (matches Azure firewall)
rtpstart=10000
rtpend=20000

; === Strict RTP Settings ===
; Relax strict RTP for mobile clients and ExternalMedia
; This helps with NAT and mobile network issues
strictrtp=no

; Probation - number of packets before accepting new source
; Lower value for faster stream acceptance
probation=2

; === Timing and Jitter Buffer ===
; Optimize for 20ms frame size (320 samples @ 16kHz)
; jitterbuffer=yes  ; Controlled per-channel in extensions.conf
; minlength=40      ; Minimum 40ms buffer
; maxlength=500     ; Maximum 500ms buffer

; === ICE/NAT Support ===
; ICE support for NAT traversal
icesupport=yes

; DTLS for WebRTC (optional)
dtlsenable=no

; Turn support (optional)
; turnaddr=stun.l.google.com:19302
; turnusername=
; turnpassword=

; === RTCP Configuration ===
; RTCP for quality monitoring
rtcpinterval=500
rtcp_mux=yes

; === HOMER HEP Configuration ===
; Added: 2025-11-12 for HOMER monitoring
hep_server=127.0.0.1
hep_port=9060
enable_hep=yes
capture_id=2001

; === Codec-Specific Settings ===
; Ensure L16/16000/1 is properly recognized
; (Asterisk will use PT=10 for L16 by default per RFC 3551)

; === RTCP-XR Configuration (Extended Reports) ===
; Enable voice quality reporting
xr_mos = yes        ; Calculate and report MOS scores
xr_rtt = yes        ; Calculate and report round-trip time

; === Jitter Buffer Configuration ===
; Added: 2025-11-12 for quality optimization
jbenable=no
jbmaxsize=100
jbimpl=adaptive
jbresyncthreshold=1000
